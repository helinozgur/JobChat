<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>JobChat</title>
  <link rel="stylesheet" href="/static/css/styles.css"/>
</head>
<body>
<div class="wrap">
  <!-- Header + Lang -->
  <div class="card">
    <div class="header-row">
      <h1><span data-i18n="title.app"></span></h1>
      <div class="lang-picker">
        <label for="langSelect" class="muted" data-i18n="label.language"></label>
        <select id="langSelect">
          <option value="tr">T√ºrk√ße</option>
          <option value="en">English</option>
        </select>
      </div>
    </div>

    <p class="muted" data-i18n="lead.text"></p>

    <form id="analyzeForm">
      <div class="row">
        <div>
          <label for="jobUrl" data-i18n="label.jobUrl"></label>
          <input id="jobUrl" name="job_url" type="url" data-i18n-ph="form.jobUrl_ph" required>
          <p class="muted" style="margin-top: 8px;" data-i18n="hint.pasteLink"></p>

          <div style="margin-top: 20px">
            <label for="cvFile" data-i18n="label.cvFile"></label>
            <input id="cvFile" name="cv" type="file" accept="application/pdf" required>
          </div>

          <div style="margin-top: 20px">
            <button type="submit" class="btn" id="analyzeBtn">
              <span id="analyzeBtnText" data-i18n="btn.analyze"></span>
              <div id="analyzeLoading" class="loading" style="display: none;"></div>
            </button>
          </div>
        </div>

        <div>
          <h2 data-i18n="section.ats"></h2>
          <div class="status-grid">
            <div class="status-item">
              <div class="status-label" data-i18n="score.overall"></div>
              <div class="status-value" id="scoreValue">-</div>
            </div>
            <div class="status-item">
              <div class="status-label" data-i18n="score.detected"></div>
              <div class="status-value" id="professionValue">-</div>
            </div>
          </div>

          <div style="margin-top: 16px">
            <div class="status-label" data-i18n="score.similarity"></div>
            <div class="prog"><b id="similarityBar" style="width: 0%"></b></div>
          </div>

          <div style="margin-top: 12px">
            <div class="status-label" data-i18n="score.coverage"></div>
            <div class="prog"><b id="coverageBar" style="width: 0%"></b></div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div id="errorAlert" class="alert alert-error" style="display: none;"></div>
  <div id="successAlert" class="alert alert-success" style="display: none;"></div>

  <div id="resultsSection" style="display: none;">
    <div class="card">
      <h2 data-i18n="section.skills"></h2>

      <div id="skillsAnalysis">
        <div class="two-col">
          <div>
            <h3 class="sub" data-i18n="skills.yours"></h3>
            <div id="cvSkills" class="chips"></div>
          </div>
          <div>
            <h3 class="sub" data-i18n="skills.matched"></h3>
            <div id="matchedSkills" class="chips"></div>
          </div>
        </div>

        <h3 class="sub warn" data-i18n="skills.missing"></h3>
        <div id="missingKeywords" class="chips"></div>

        <div class="job-req">
          <div class="muted small">
            <strong data-i18n="skills.jobReq"></strong>
            <span id="jobSkills">-</span>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 data-i18n="section.report"></h2>
      <div id="optimizationReport"></div>

      <details style="margin-top: 20px;">
        <summary class="muted" data-i18n="resume.preview"></summary>
        <div class="mono muted preview" id="cvPreview"></div>
      </details>
    </div>
  </div>

  <div class="card">
    <h2 data-i18n="section.coach"></h2>

    <div id="professionBadge" style="display: none; margin-bottom: 16px;">
      <div class="badge">
        <div class="emoji">üë®‚Äçüíº</div>
        <div>
          <div class="badge-title" id="detectedProfession">Profession</div>
          <div class="badge-desc" id="professionDescription">AI-powered career coaching</div>
        </div>
      </div>
    </div>

    <p class="muted" data-i18n="coach.lead"></p>

    <div class="example-questions">
      <button type="button" class="example-btn" data-i18n="coach.examples.project"
              onclick="setQuestion(t('coach.examples.projectQ'))"></button>
      <button type="button" class="example-btn" data-i18n="coach.examples.optimize"
              onclick="setQuestion(t('coach.examples.optimizeQ'))"></button>
      <button type="button" class="example-btn" data-i18n="coach.examples.skills"
              onclick="setQuestion(t('coach.examples.skillsQ'))"></button>
      <button type="button" class="example-btn" data-i18n="coach.examples.interview"
              onclick="setQuestion(t('coach.examples.interviewQ'))"></button>
      <button type="button" class="example-btn" data-i18n="coach.examples.path"
              onclick="setQuestion(t('coach.examples.pathQ'))"></button>
    </div>

    <textarea id="chatQuestion" data-i18n-ph="ph.chat"></textarea>

    <div class="btn-row">
      <button type="button" class="btn" id="chatBtn">
        <span id="chatBtnText" data-i18n="btn.ask"></span>
        <div id="chatLoading" class="loading" style="display: none;"></div>
      </button>
      <button type="button" class="btn btn-secondary" onclick="clearChat()" data-i18n="btn.clear"></button>

      <div id="typingIndicator" class="muted" style="display:none" data-i18n="chat.typing"></div>
    </div>

    <div id="chatOutput" class="chat-output">
      <div class="empty-chat">
        <div class="big-emoji">ü§ñ</div>
        <div class="title" data-i18n="coach.ready"></div>
        <div class="muted small" data-i18n="coach.ready_hint"></div>
      </div>
    </div>

    <div id="chatStats" class="muted center small" style="display:none;">
      Powered by <strong>Qwen2.5 7B</strong> ‚Ä¢ <span id="responseTime">-</span>ms ‚Ä¢ <span id="tokenCount">-</span> tokens
    </div>
  </div>
</div>

<!-- i18n mutlaka app.js'ten √∂nce -->
<script src="/static/js/i18n.js"></script>
<script src="/static/js/app.js"></script>
</body>
</html>
